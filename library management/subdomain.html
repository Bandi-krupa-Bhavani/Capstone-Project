<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BOOKVERSE – Subdomain</title>

  <!-- Google Fonts & FontAwesome -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Playfair+Display:wght@500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    :root {
      --accent-1: #d4a373;
      --accent-2: #c17c4a;
      --text-brown: #7b3f00;
      --gold: #b7791f;
    }
    html,body { margin:0; padding:0; }
    body {
      font-family: 'Inter', sans-serif;
      background:
        linear-gradient(to bottom, rgba(227,190,154,0.8), rgba(243,244,246,0.9)),
        url("https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?q=80&w=1770&auto=format&fit=crop") no-repeat center/cover fixed;
      color:#1f2937;
      min-height:100vh;
    }

    .wrap { max-width:1200px; margin:0 auto; padding:1.2rem; }

    /* Header / Breadcrumbs */
    .subheader { display:flex; align-items:center; justify-content:space-between; gap:1rem; margin-bottom:1rem; }
    .crumbs { color:#5a3825; font-weight:600; font-family:'Inter',sans-serif; }
    .crumbs a{ color:var(--gold); text-decoration:none; }
    .backbtn {
      text-decoration:none; padding:.5rem .8rem; border-radius:8px; border:1px solid #f0e0d1; background:#fff; color:var(--text-brown); font-weight:600; display:inline-flex; align-items:center; gap:.5rem;
    }

    h1 {
      font-size:1.6rem; margin:.2rem 0 1rem; color:#111827;
      font-family:'Playfair Display', serif;
      border-bottom:3px solid var(--accent-1);
      display:inline-block; padding-bottom:.2rem;
    }

    /* Filters (optional stub) */
    .filters { display:flex; gap:.6rem; margin: .5rem 0 1rem; flex-wrap:wrap; }
    .chip { background:#fff; border:1px solid #f0e0d1; color:#4a2c1a; padding:.4rem .7rem; border-radius:9999px; font-weight:600; cursor:pointer; }
    .chip.active { background:linear-gradient(to right,#d4a373,#c17c4a); color:#fff; border:none; }

    /* Book grid */
    .bookgrid { display:grid; gap:1rem; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); }
    .bookcard{ background:#fff; border:1px solid #f0e0d1; border-radius:14px; box-shadow:0 4px 10px rgba(0,0,0,0.06); overflow:hidden; display:flex; flex-direction:column; }
    .bookthumb{ aspect-ratio: 3/4; width:100%; object-fit:cover; background:#fff7ed; }
    .bookbody{ padding:.9rem; display:flex; flex-direction:column; gap:.35rem; }
    .booktitle{ font-weight:700; color:#111827; }
    .bookauthor{ color:#6b7280; font-size:.92rem; display:flex; align-items:center; gap:.4rem; }
    .meta { font-size:.86rem; color:#6b7280; display:flex; align-items:center; gap:.6rem; }
    .bookactions{ display:flex; gap:.5rem; margin-top:.6rem; }
    .btn{
      flex:1; display:flex; align-items:center; justify-content:center; gap:.4rem;
      border:none; border-radius:10px; padding:.55rem .7rem; cursor:pointer;
      background:linear-gradient(to right,#d4a373,#c17c4a); color:#fff; font-weight:600; text-decoration:none;
    }
    .btn.secondary{ background:#f3f4f6; color:#111827; border:1px solid #e5e7eb; }

    /* Empty state */
    .empty{
      grid-column:1/-1; background:#fff; border:1px solid #f0e0d1; border-radius:12px; padding:1rem;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="subheader">
      <div class="crumbs" id="crumbs"></div>
      <a href="dashboard.html" class="backbtn"><i class="fa-solid fa-arrow-left"></i> Back to Dashboard</a>
    </div>

    <h1 id="pageTitle">Books</h1>

    <!-- Optional filters (by language/level/type) -->
    <div class="filters" id="filters" style="display:none;">
      <button class="chip active">All</button>
      <button class="chip">Beginner</button>
      <button class="chip">Intermediate</button>
      <button class="chip">Advanced</button>
    </div>

    <div class="bookgrid" id="bookgrid"></div>
  </div>

  <!-- Data -->
  <script src="data/books.js"></script>
  <script>
    // Read URL params
    const params = new URLSearchParams(location.search);
    const domain = params.get('domain') || '';
    const sub = params.get('sub') || '';

    // Header
    const titleEl = document.getElementById('pageTitle');
    const crumbsEl = document.getElementById('crumbs');
    titleEl.textContent = `${sub} – ${domain}`;
    crumbsEl.innerHTML = `<a href='dashboard.html'>Domains</a> / <span>${domain}</span> / <strong>${sub}</strong>`;

    // Render cards
    const grid = document.getElementById('bookgrid');
    const list = (BOOKVERSE_DATA[domain] && BOOKVERSE_DATA[domain][sub]) ? BOOKVERSE_DATA[domain][sub] : [];

    function iconFromType(t){
      switch((t||'').toLowerCase()){
        case 'pdf': return 'fa-file-pdf';
        case 'site': return 'fa-link';
        case 'video': return 'fa-video';
        default: return 'fa-file-lines';
      }
    }

    if(!list.length){
      grid.innerHTML = `<div class="empty">No books found yet for <strong>${sub}</strong>. Check back soon!</div>`;
    } else {
      grid.innerHTML = list.map(b => {
        const iClass = iconFromType(b.type);
        return `
        <div class="bookcard">
          <img class="bookthumb" src="${b.cover || 'assets/cover-placeholder.png'}" alt="${b.title}">
          <div class="bookbody">
            <div class="booktitle">${b.title}</div>
            <div class="bookauthor"><i class="fa-solid fa-user"></i> ${b.author || '—'}</div>
            <div class="meta">
              <i class="fa-solid ${iClass}"></i> ${b.type ? b.type.toUpperCase() : 'PDF'}
              ${b.year ? `<span>• <i class="fa-regular fa-calendar"></i> ${b.year}</span>` : ''}
            </div>
            <div class="bookactions">
              <a class="btn" href="${b.href}" target="_blank" rel="noopener">
                <i class="fa-solid ${iClass}"></i> Open
              </a>
              ${b.info ? `<a class="btn secondary" href="${b.info}" target="_blank" rel="noopener"><i class="fa-solid fa-circle-info"></i> Info</a>` : ''}
            </div>
          </div>
        </div>`;
      }).join('');
    }
  </script>
</body>
</html>
